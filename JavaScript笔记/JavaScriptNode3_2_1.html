<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<form name='fm1' onsubmit='return checkfm(this)'>
			<table>
				<tr>
					<td>账号</td>
					<td><input type="text" name="username" onblur='cname(this)' /></td>
					<td><span class='error'></span></td>
				</tr>
				<tr>
					<td>密码</td>
					<td><input type="password" name="pwd" onblur='cpwd(this)' value="" /></td>
					<td><span class='error'></span></td>
				</tr>
				<tr>
					<td>年龄</td>
					<td><input type="text" name="age" onblur='cage(this)' value="" /></td>
					<td><span class='error'></span></td>
				</tr>
				<tr>
					<td>手机号</td>
					<td><input type="text" name="phone" onblur='cphone(this)' value="" /></td>
					<td><span class='error'></span></td>
				</tr>
				<tr>
					<td>邮箱</td>
					<td><input type="text" name="email" onblur='cemail(this)' value="" /></td>
					<td><span class='error'></span></td>
				</tr>
				<tr>
					<td colspan='2' align='center'><input type="submit" value="保存" /></td>
					<td></td>
				</tr>
			</table>
		</form>
		
		<script type='text/javascript'>
			/*正则表达式
				结构:var reg = /正则表达式/选项;
				使用:reg.test('字符串');
			匹配符号:
				字母: [a-z] [A-Z] [a-zA-Z]
				单个字: \w
				数字: \d
				除换行和空格: .
				.      \.
				1~n    +
				0~n    *
				0~1    ?
				x个~y个    {x,y}
				x个        {x}
				至少x个    {x,}			
			*/
			//验证用户名
			function cname(inp){
				//判断js_name中的内容是否符合用户名要求(数字不能开头，至少6位)
				var reg = /^[a-zA-Z]\w{5,}$/;
				//判断
				if(reg.test(inp.value)){
					//验证成功
					var sp = inp.parentNode.parentNode.getElementsByTagName('span')[0];
					sp.innerHTML = '';
				}else{
					//让username的span显示提示文字
					var sp = inp.parentNode.parentNode.getElementsByTagName('span')[0];
					sp.innerHTML = '用户名格式错误';
				}
			}
			//验证密码
			function cpwd(inp){
				//密码必须是6位数字
				var reg = /^\d{6}$/;
				//判断
				if(reg.test(inp.value)){
					//验证成功
					var sp = inp.parentNode.parentNode.getElementsByTagName('span')[0];
					sp.innerHTML = '';
				}else{
					//让span显示提示文字
					var sp = inp.parentNode.parentNode.getElementsByTagName('span')[0];
					sp.innerHTML = '密码必须是6位数字';
				}
			}
			//验证年龄
			function cage(inp){
				//年龄必须是18~45			
				//判断
				if(inp.value >= 18 && inp.value <=45){
					//验证成功
					var sp = inp.parentNode.parentNode.getElementsByTagName('span')[0];
					sp.innerHTML = '';
				}else{
					//让span显示提示文字
					var sp = inp.parentNode.parentNode.getElementsByTagName('span')[0];
					sp.innerHTML = '年龄必须是18~45之间';
				}
			}
			//验证手机号
			function cphone(inp){
				//1 3-8 xxxxxxxxx
				var reg = /^1[3-8]\d{9}$/;
				//判断
				if(reg.test(inp.value)){
					//验证成功
					var sp = inp.parentNode.parentNode.getElementsByTagName('span')[0];
					sp.innerHTML = '';
				}else{
					//让span显示提示文字
					var sp = inp.parentNode.parentNode.getElementsByTagName('span')[0];
					sp.innerHTML = '手机号不正确';
				}
			}
			//验证邮箱
			function cemail(inp){
				var reg = /^\w+@[0-9a-zA-Z]+(\.\w+){1,2}$/;
				//判断
				if(reg.test(inp.value)){
					//验证成功
					var sp = inp.parentNode.parentNode.getElementsByTagName('span')[0];
					sp.innerHTML = '';
				}else{
					//让span显示提示文字
					var sp = inp.parentNode.parentNode.getElementsByTagName('span')[0];
					sp.innerHTML = '邮箱不正确';
				}
			}
			
			function checkfm(fm){
			    //fm代表当前的表单
				cname(fm.username);
				cpwd(fm.pwd);
				cage(fm.age);
				cphone(fm.phone);
				cemail(fm.email);
				//判断是否验证成功
				var spans = document.getElementsByClassName('error');
				//for(i in spans)这个不能用，这样遍历未定义undefined的值不会遍历到
				//for(var i=spans.length-1;i>=0;i--)这样才能全部遍历
				for(var i=spans.length-1;i>=0;i--){
					if(spans[i].innerHTML != ''){
						return false;
					}
				}
				return true;
			}
		</script>
		
		
		
	</body>
</html>